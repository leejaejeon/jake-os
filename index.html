<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Jake WorkOS V8.6 - Real Map Engine</title>
  
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <style>
    @import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css');
    body { font-family: 'Pretendard', sans-serif; background-color: #f1f5f9; color: #1e293b; -webkit-font-smoothing: antialiased; }
    
    /* ìŠ¤í¬ë¡¤ë°” ë””ìì¸ */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 4px; }
    ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
    
    /* ëŒ€ì‹œë³´ë“œ ë‹¬ë ¥ */
    .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; background-color: #e2e8f0; border: 1px solid #e2e8f0; }
    .calendar-cell { min-height: 120px; background-color: #fff; padding: 4px; transition: background 0.2s; }
    .calendar-cell:hover { background-color: #f8fafc; }
    @media (max-width: 640px) { .calendar-cell { min-height: 80px; font-size: 10px; } }

    /* ëª¨ë‹¬ ì• ë‹ˆë©”ì´ì…˜ */
    .modal-enter { animation: fadeIn 0.2s ease-out; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

    /* ğŸ—ºï¸ í˜„ì‹¤ ì§€ë„ ì „ìš© CSS */
    .map-row { display: flex; flex-direction: row; justify-content: flex-start; gap: 4px; margin-bottom: 4px; width: max-content; }
    .map-slot { width: 85px; min-width: 85px; height: 70px; border-radius: 6px; border: 1px solid #cbd5e1; display: flex; flex-direction: column; justify-content: center; align-items: center; cursor: pointer; transition: transform 0.1s; box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
    .map-slot:active { transform: scale(0.95); opacity: 0.8; }
    .slot-spacer { visibility: hidden; pointer-events: none; } /* ë¹ˆ ê³µê°„ ì²˜ë¦¬ìš© */
    .slot-id { font-size: 10px; opacity: 0.8; font-weight: 800; margin-bottom: 2px; }
    .slot-name { font-size: 11px; font-weight: 800; text-align: center; width: 100%; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; padding: 0 2px; letter-spacing: -0.5px; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo, useCallback } = React;

    // ğŸ” Supabase Configuration
    const SUPABASE_URL = 'https://lqccxnciiajwqdmpwjdv.supabase.co';
    const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxxY2N4bmNpaWFqd3FkbXB3amR2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE1MjA3MTMsImV4cCI6MjA4NzA5NjcxM30.L23-eq-DIPsbONOeX-xQ8UcMb7gtgTTTRpkaSm9HTw4';
    const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

    // ğŸ›¡ï¸ Data Sanitizer
    const clean = (val) => {
      if (!val || val === '0.0' || val === '0' || val === 'null' || val === ' -  - ') return '';
      return String(val).trim();
    };
    const normalizeDate = (dateVal) => {
      if (!dateVal) return null;
      const d = new Date(String(dateVal).replace(/\./g, '-').replace(/\s/g, ''));
      return isNaN(d.getTime()) ? null : d.toISOString().split('T')[0];
    };
    const formatMoney = (val) => {
      const num = parseInt(String(val).replace(/[^0-9]/g, ''));
      return isNaN(num) ? '0ì›' : num.toLocaleString() + 'ì›';
    };

    const SECTION_LIST = ['A2/ê°€','A3/ê°€','A4/ê°€','A4/ë‚˜','A4/ë‹¤','A5/ê°€','A5/ë‚˜','A6/ê°€','A6/ë‚˜','B1/ê°€','B2/ê°€','B3/ê°€','B4/ê°€','B5/ê°€','B6/ê°€/1-12','B6/ê°€/13-14','C1/ê°€'];

    // ==========================================
    // ğŸ§± Component: Modal System
    // ==========================================
    function Modal({ isOpen, onClose, title, children }) {
      if (!isOpen) return null;
      return (
        <div className="fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/70 backdrop-blur-sm" onClick={onClose}>
          <div className="bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col modal-enter" onClick={e => e.stopPropagation()}>
            <div className="p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50">
              <h3 className="text-lg font-black text-slate-800">{title}</h3>
              <button onClick={onClose} className="text-slate-400 hover:text-slate-800 font-bold text-xl">âœ•</button>
            </div>
            <div className="flex-1 overflow-y-auto p-5 bg-slate-50/50">{children}</div>
            <div className="p-3 bg-white border-t border-slate-100">
              <button onClick={onClose} className="w-full py-3 bg-slate-800 text-white rounded-xl font-bold hover:bg-slate-700 shadow-sm">ë‹«ê¸°</button>
            </div>
          </div>
        </div>
      );
    }

    // ==========================================
    // ğŸ§© UI Component: Navigation Sidebar (V8 Base)
    // ==========================================
    function Sidebar({ activeTab, setActiveTab, isOpen, setIsOpen }) {
      const menus = [
        { group: 'ê³µìœ ì•± (TEAM)', items: [
          { id: 'dash', icon: 'ğŸ“Š', label: 'í†µí•© ëŒ€ì‹œë³´ë“œ' },
          { id: 'field', icon: 'ğŸ”', label: 'í˜„ì¥ê´€ë¦¬ (Grid)' },
          { id: 'hr', icon: 'ğŸ–ï¸', label: 'ê·¼íƒœê´€ë¦¬' }
        ]},
        { group: 'WorkOS (JAKE)', items: [
          { id: 'project', icon: 'ğŸš€', label: 'í”„ë¡œì íŠ¸ ì¹¸ë°˜' },
          { id: 'engraving', icon: 'âš°ï¸', label: 'ê°ì¸ê´€ë¦¬' },
          { id: 'meeting', icon: 'ğŸ“', label: 'íšŒì˜ë¡/í˜„ì•ˆ' },
          { id: 'contact', icon: 'ğŸ“‡', label: 'ì—°ë½ì²˜' }
        ]}
      ];

      return (
        <>
          {isOpen && <div className="fixed inset-0 bg-black/50 z-40 lg:hidden" onClick={() => setIsOpen(false)} />}
          <aside className={`fixed inset-y-0 left-0 z-50 w-64 bg-slate-900 text-slate-300 transform transition-transform duration-300 lg:translate-x-0 lg:static ${isOpen ? 'translate-x-0' : '-translate-x-full'}`}>
            <div className="p-6 border-b border-slate-800 flex justify-between items-center">
              <h1 className="text-xl font-black text-white tracking-tighter">JAKE WorkOS <span className="text-xs bg-blue-600 px-1.5 py-0.5 rounded ml-1">V8.6</span></h1>
              <button className="lg:hidden text-slate-400" onClick={() => setIsOpen(false)}>âœ•</button>
            </div>
            <nav className="p-4 space-y-8 overflow-y-auto h-[calc(100vh-80px)] no-scrollbar">
              {menus.map(group => (
                <div key={group.group}>
                  <p className="text-[10px] font-bold text-slate-500 mb-3 ml-2 uppercase tracking-widest">{group.group}</p>
                  <div className="space-y-1">
                    {group.items.map(item => (
                      <button
                        key={item.id}
                        onClick={() => { setActiveTab(item.id); setIsOpen(false); }}
                        className={`w-full flex items-center px-3 py-2.5 rounded-lg font-bold text-sm transition-all ${activeTab === item.id ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/50' : 'hover:bg-slate-800 hover:text-white'}`}
                      >
                        <span className="mr-3 text-lg">{item.icon}</span> {item.label}
                      </button>
                    ))}
                  </div>
                </div>
              ))}
            </nav>
          </aside>
        </>
      );
    }

    // ==========================================
    // ğŸ“Š View: Unified Dashboard (V8 Base - Untouched logic)
    // ==========================================
    function DashboardView() {
      const [loading, setLoading] = useState(true);
      const [events, setEvents] = useState([]);
      const [currentDate, setCurrentDate] = useState(new Date());

      const fetchAllData = useCallback(async () => {
        setLoading(true);
        try {
          const [burialRes, salesRes] = await Promise.all([
            supabaseClient.from('burial_schedule').select('*'),
            supabaseClient.from('status_mgmt').select('*')
          ]);

          const burialEvents = (burRes.data || []).map(b => ({
            type: 'burial', date: normalizeDate(b.ì•ˆì¹˜ì¼), title: `ğŸŸ¢ ${clean(b.ê³ ì¸ëª…)}`, sub: clean(b.ìœ„ì¹˜), raw: b
          }));

          const salesEvents = (salesRes.data || []).map(s => ({
            type: 'sales', date: normalizeDate(s.ë‹µì‚¬ì¼) || normalizeDate(s.ë“±ë¡ì¼), title: `ğŸŸ¡ ${clean(s.ê³ ê°_ê³ ì¸_ëª…)}`, sub: `${clean(s.ì˜ì—…ìì‚¬ëª…)}/${clean(s.ì˜ì—…ìì„±í•¨)}`, status: s.í˜„ì¬ìƒíƒœ, raw: s
          })).filter(s => s.status !== 'ìƒë‹´ í›„ ëŒ€ê¸°');

          setEvents([...burialEvents, ...salesEvents].filter(e => e.date !== null));
        } catch (err) { console.error(err); } finally { setLoading(false); }
      }, []);

      useEffect(() => { fetchAllData(); }, [fetchAllData]);

      const calendarDays = useMemo(() => {
        const year = currentDate.getFullYear(), month = currentDate.getMonth();
        const startDay = new Date(year, month, 1).getDay(), offset = startDay === 0 ? 6 : startDay - 1;
        const lastDate = new Date(year, month + 1, 0).getDate();
        const days = [];
        for (let i = 0; i < offset; i++) days.push(null);
        for (let i = 1; i <= lastDate; i++) {
          const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
          days.push({ day: i, dateStr, dayEvents: events.filter(e => e.date === dateStr) });
        }
        return days;
      }, [currentDate, events]);

      return (
        <div className="space-y-6 max-w-7xl mx-auto">
          <div className="bg-white rounded-2xl shadow-xl shadow-slate-200/50 border border-slate-200 overflow-hidden">
            <div className="p-6 bg-white border-b border-slate-100 flex justify-between items-center">
              <div className="flex items-center space-x-4">
                <button onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1))} className="p-2 hover:bg-slate-100 rounded-full transition">â—€</button>
                <h2 className="text-2xl font-black text-slate-800 tracking-tight">{currentDate.getFullYear()}ë…„ {currentDate.getMonth() + 1}ì›”</h2>
                <button onClick={() => setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1))} className="p-2 hover:bg-slate-100 rounded-full transition">â–¶</button>
              </div>
            </div>

            <div className="overflow-x-auto no-scrollbar w-full">
              <div className="min-w-[700px]">
                <div className="calendar-grid">
                  {['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† ', 'ì¼'].map((d, i) => (
                    <div key={d} className={`p-3 text-center text-xs font-black bg-slate-50 border-b border-slate-200 ${i === 6 ? 'text-red-500' : i === 5 ? 'text-blue-500' : 'text-slate-400'}`}>{d}</div>
                  ))}
                  {calendarDays.map((d, i) => (
                    <div key={i} className={`calendar-cell ${!d ? 'bg-slate-50/30' : ''}`}>
                      {d && (
                        <>
                          <div className="text-right font-bold text-xs text-slate-400 mb-1">{d.day}</div>
                          <div className="space-y-1 max-h-[85px] overflow-y-auto no-scrollbar">
                            {d.dayEvents.map((ev, idx) => (
                              <div key={idx} className={`px-1.5 py-1 rounded text-[10px] font-bold truncate border shadow-sm ${ev.type === 'burial' ? 'bg-emerald-600 text-white border-emerald-700' : 'bg-amber-400 text-amber-900 border-amber-500'}`}>
                                {ev.title}
                              </div>
                            ))}
                          </div>
                        </>
                      )}
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        </div>
      );
    }

    // ==========================================
    // ğŸ” View: Field Map (ğŸš€ ì¢Œí‘œ ê¸°ë°˜ ìŠ¤ë§ˆíŠ¸ ë Œë”ë§ ì—”ì§„ íƒ‘ì¬)
    // ==========================================
    function FieldView() {
      const [loading, setLoading] = useState(true);
      const [data, setData] = useState([]);
      const [area, setArea] = useState('A6/ê°€');
      const [modalState, setModalState] = useState({ isOpen: false, data: null });

      useEffect(() => {
        const fetchField = async () => {
          setLoading(true);
          const res = await supabaseClient.from('field_data').select('*').eq('êµ¬ì—­', area);
          setData(res.data || []);
          setLoading(false);
        };
        fetchField();
      }, [area]);

      // ğŸ§  1ì°¨ì› ë°°ì—´ì„ X-Y ì¢Œí‘œê³„ 2ì°¨ì› ë§µìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì—”ì§„ (í•µì‹¬)
      const renderedMap = useMemo(() => {
        if (!data || data.length === 0) return [];

        // 1. ë°ì´í„°ë¥¼ í–‰(Row)ê³¼ ì—´(Col) ì¢Œí‘œë¡œ ë¶„í•´
        const parsed = data.map(item => {
          const match = String(item.ìœ„ì¹˜_ë²ˆí˜¸).match(/(\d+)/g);
          const r = match && match.length > 0 ? parseInt(match[0]) : 999;
          const c = match && match.length > 1 ? parseInt(match[1]) : 999;
          return { ...item, r, c };
        });

        // 2. í–‰(Row) ê¸°ì¤€ìœ¼ë¡œ ê·¸ë£¹í™”
        const rows = {};
        parsed.forEach(item => {
          if (!rows[item.r]) rows[item.r] = [];
          rows[item.r].push(item);
        });

        // 3. í–‰ ë²ˆí˜¸ ì˜¤ë¦„ì°¨ìˆœ (ìœ„ì—ì„œ ì•„ë˜ë¡œ) ì •ë ¬
        const sortedRowKeys = Object.keys(rows).map(Number).sort((a, b) => a - b);

        return sortedRowKeys.map(rKey => {
          const rowItems = rows[rKey];
          // ì´ í–‰ì—ì„œ ê°€ì¥ í° ì—´ ë²ˆí˜¸ ì°¾ê¸° (ì˜ˆ: 6-5ë©´ 5ê°€ maxCol)
          const maxCol = Math.max(...rowItems.filter(i => i.c !== 999).map(i => i.c), 0);
          
          const rowSlots = [];
          // 4. ì—´ì„ ìµœëŒ€ ë²ˆí˜¸ë¶€í„° 1ê¹Œì§€ ì—­ìˆœìœ¼ë¡œ ë Œë”ë§ (ê°€ì¥ ì˜¤ë¥¸ìª½ì´ 1ë²ˆì´ ë˜ë„ë¡)
          for (let c = maxCol; c >= 1; c--) {
            const item = rowItems.find(i => i.c === c);
            if (item) {
              rowSlots.push({ type: 'data', ...item });
            } else {
              // DBì— ì—†ëŠ” ë²ˆí˜¸ëŠ” íˆ¬ëª…í•œ ë¹ˆ ê³µê°„(Spacer)ìœ¼ë¡œ ê°•ì œ ë Œë”ë§í•˜ì—¬ í˜„ì‹¤ì˜ ë¶ˆê·œì¹™í•œ ëª¨ì–‘ì„ ë§ì¶¤
              rowSlots.push({ type: 'spacer', id: `spacer-${rKey}-${c}` });
            }
          }

          // íŒŒì‹± ë¶ˆê°€ëŠ¥í•œ ì˜ˆì™¸ ë°ì´í„° ì²˜ë¦¬ (ë³´í†µ ì—†ìŒ)
          rowItems.filter(i => i.c === 999).forEach(u => rowSlots.push({ type: 'data', ...u }));

          return { rowNum: rKey, slots: rowSlots };
        });
      }, [data, area]);

      return (
        <div className="space-y-4 max-w-7xl mx-auto flex flex-col h-[calc(100vh-100px)]">
          {/* ë„¤ë¹„ê²Œì´ì…˜ */}
          <div className="flex gap-2 overflow-x-auto pb-2 no-scrollbar shrink-0 border-b border-slate-200">
            {SECTION_LIST.map(s => (
              <button 
                key={s} 
                onClick={() => setArea(s)}
                className={`px-5 py-2.5 rounded-t-xl font-black text-xs whitespace-nowrap transition-all border-t border-l border-r ${area === s ? 'bg-white text-slate-900 border-slate-200 border-b-white translate-y-[1px]' : 'bg-slate-100 text-slate-500 border-transparent hover:bg-slate-200'}`}
              >
                {s}
              </button>
            ))}
          </div>

          {/* ğŸ—ºï¸ ë¬´í•œ ìŠ¤í¬ë¡¤ ìº”ë²„ìŠ¤ */}
          <div className="bg-white p-4 md:p-8 rounded-b-2xl rounded-tr-2xl shadow-xl border border-slate-200 flex-1 overflow-auto">
            {loading ? (
              <div className="flex h-full items-center justify-center font-black text-slate-300 animate-pulse tracking-widest text-lg">MAP SYNCHRONIZING...</div>
            ) : renderedMap.length === 0 ? (
              <div className="flex h-full items-center justify-center font-bold text-slate-400">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
            ) : (
              <div className="w-max mx-auto pb-10 pr-10">
                {renderedMap.map((row) => (
                  <div key={row.rowNum} className="map-row">
                    {row.slots.map((s, sIdx) => {
                      if (s.type === 'spacer') {
                        return <div key={s.id} className="map-slot slot-spacer"></div>;
                      }

                      const status = clean(s.ê³„ì•½_ìƒíƒœ) || 'ë¯¸ë¶„ì–‘';
                      const colors = {
                        'ì•ˆì¹˜': 'bg-emerald-700 text-white border-emerald-800',
                        'ì˜ˆì•½': 'bg-amber-300 text-amber-900 border-amber-400',
                        'ê³„ì•½ê¸ˆ': 'bg-amber-100 text-amber-800 border-amber-300',
                        'í™€ë”©': 'bg-rose-600 text-white border-rose-800',
                        'ë¯¸ë¶„ì–‘': 'bg-white text-slate-400 border-slate-300'
                      };
                      return (
                        <div key={sIdx} onClick={() => setModalState({ isOpen: true, data: s })} className={`map-slot ${colors[status] || colors['ë¯¸ë¶„ì–‘']}`}>
                          <div className={`slot-id ${status==='ë¯¸ë¶„ì–‘'?'text-slate-400':'text-inherit'}`}>{s.ìœ„ì¹˜_ë²ˆí˜¸}</div>
                          <div className={`slot-name ${status==='ë¯¸ë¶„ì–‘'?'opacity-30':'opacity-100'}`}>{clean(s.ì„±í•¨) || clean(s.ê³„ì•½ì) || 'EMPTY'}</div>
                        </div>
                      );
                    })}
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* ğŸ“ ê³µìœ ì•± 100% ì´ì‹ ëª¨ë‹¬ */}
          <Modal isOpen={modalState.isOpen} onClose={() => setModalState({ isOpen: false, data: null })} title={`ğŸ—ºï¸ ${modalState.data?.êµ¬ì—­} ${modalState.data?.ìœ„ì¹˜_ë²ˆí˜¸} ìƒì„¸ì •ë³´`}>
            {modalState.data && (
              <div className="space-y-3">
                <div className="flex justify-between items-center bg-slate-100 p-4 rounded-xl border border-slate-200">
                  <div>
                    <p className="text-[10px] font-black text-slate-400">ì•ˆì¹˜ì (ì„±í•¨)</p>
                    <p className="text-xl font-black text-slate-800">{clean(modalState.data.ì„±í•¨) || '-'}</p>
                  </div>
                  <div className="text-right">
                    <p className="text-[10px] font-black text-slate-400">í˜„ì¬ ìƒíƒœ</p>
                    <p className="text-lg font-black text-blue-600">{clean(modalState.data.ê³„ì•½_ìƒíƒœ) || 'ë¯¸ë¶„ì–‘'}</p>
                  </div>
                </div>
                
                <div className="grid grid-cols-2 gap-3">
                  <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                    <p className="text-[10px] font-black text-slate-400 mb-1">ê³„ì•½ì</p>
                    <p className="font-bold text-slate-800">{clean(modalState.data.ê³„ì•½ì) || '-'}</p>
                  </div>
                  <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                    <p className="text-[10px] font-black text-slate-400 mb-1">ê¸°ìˆ˜</p>
                    <p className="font-bold text-slate-800">{clean(modalState.data.ê¸°ìˆ˜) ? `${modalState.data.ê¸°ìˆ˜}ê¸°` : '-'}</p>
                  </div>
                </div>

                <div className="grid grid-cols-2 gap-3">
                  <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                    <p className="text-[10px] font-black text-slate-400 mb-1">ë¶„ì–‘ê°€</p>
                    <p className="font-bold text-amber-600">{formatMoney(modalState.data.ê°€ê²©)}</p>
                  </div>
                  <div className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm">
                    <p className="text-[10px] font-black text-slate-400 mb-1">ê´€ë¦¬ë¹„</p>
                    <p className="font-bold text-amber-600">{formatMoney(modalState.data.ê´€ë¦¬ë¹„)}</p>
                  </div>
                </div>

                <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm mt-2">
                  <p className="text-[10px] font-black text-slate-400 mb-2">ë¹„ê³  (í˜„ì¥ ë©”ëª¨)</p>
                  <p className="text-sm font-medium text-slate-600 whitespace-pre-wrap">{clean(modalState.data.ë©”ëª¨) || 'ê¸°ë¡ëœ ë©”ëª¨ê°€ ì—†ìŠµë‹ˆë‹¤.'}</p>
                </div>
              </div>
            )}
          </Modal>
        </div>
      );
    }

    // ==========================================
    // âš™ï¸ Main Application Controller
    // ==========================================
    function App() {
      const [activeTab, setActiveTab] = useState('dash');
      const [isSidebarOpen, setIsSidebarOpen] = useState(false);

      return (
        <div className="flex h-screen overflow-hidden">
          <Sidebar activeTab={activeTab} setActiveTab={setActiveTab} isOpen={isSidebarOpen} setIsOpen={setIsSidebarOpen} />
          
          <main className="flex-1 flex flex-col h-screen overflow-hidden">
            <header className="h-16 bg-white border-b border-slate-200 flex items-center px-6 shrink-0 justify-between z-30 shadow-sm">
              <div className="flex items-center">
                <button className="lg:hidden p-2 text-slate-500 bg-slate-100 rounded-lg mr-4" onClick={() => setIsSidebarOpen(true)}>â˜°</button>
                <h2 className="font-black text-xl text-slate-800 uppercase tracking-tighter">
                  {activeTab === 'dash' ? 'Integrated Dashboard' : activeTab === 'field' ? 'Field Management' : activeTab}
                </h2>
              </div>
              <div className="flex items-center space-x-4">
                <div className="h-2 w-2 rounded-full bg-emerald-500 animate-pulse" title="Supabase Connected" />
                <span className="text-[10px] font-black text-slate-400">JAKE ZEPHYRUS-G14 // CONNECTED</span>
              </div>
            </header>

            <div className="flex-1 overflow-y-auto p-4 md:p-8 no-scrollbar bg-[#F8FAFC]">
              {activeTab === 'dash' && <DashboardView />}
              {activeTab === 'field' && <FieldView />}
              {['hr', 'project', 'engraving', 'meeting', 'contact'].includes(activeTab) && (
                <div className="flex flex-col items-center justify-center h-full text-slate-300">
                  <span className="text-6xl mb-4">âš™ï¸</span>
                  <p className="font-black text-xl uppercase tracking-widest italic">Module "{activeTab}" under construction</p>
                  <p className="text-sm mt-2 font-bold text-slate-400">Phase 6: Dashboard Modal & WorkOS Porting scheduled next.</p>
                </div>
              )}
            </div>
          </main>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
